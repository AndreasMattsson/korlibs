apply plugin: 'konan'

konan.targets = nativeTargets

konanArtifacts {
	library(project.name.replace("-native", "")) {
		srcDir 'src'
		enableMultiplatform true

		libraries {
			artifact project(":klock-native"), "klock"
			artifact project(":kmem-native"), "kmem"
			artifact project(":kds-native"), "kds"
			artifact project(":klogger-native"), "klogger"
		}

		pom {
			withXml {
				def root = asNode()
				root.appendNode('name', project.name)
				root.appendNode('description', project.description)
			}
		}
	}
}

dependencies {
	expectedBy project(':' + project.name.replace("-native", "-common"))
	//testImplementation project(':' + project.name.replace("-native", "-common"))
}
